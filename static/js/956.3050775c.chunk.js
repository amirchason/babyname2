/*! For license information please see 956.3050775c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksoulseed=self.webpackChunksoulseed||[]).push([[956],{5462:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(6230).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6890:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(6230).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},6956:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var r=s(9379),a=s(9950),n=s(9396),o=s(5838),l=s(6429),i=s(9680),c=s(2828),d=s(5462),m=s(8935),x=s(9975),u=s(6890),p=s(7737);const h=(0,s(6230).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var g=s(6149),b=s(8651);function v(){const e="soulseed_voter_id",t=localStorage.getItem(e);if(t)return t;const s=function(){var e;const t={userAgent:navigator.userAgent,language:navigator.language,languages:(null===(e=navigator.languages)||void 0===e?void 0:e.join(","))||"",platform:navigator.platform,screenResolution:"".concat(screen.width,"x").concat(screen.height),colorDepth:screen.colorDepth,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,timezoneOffset:(new Date).getTimezoneOffset(),timestamp:Date.now(),random:Math.random().toString(36).substring(7)};return JSON.stringify(t)}(),r="voter_".concat(function(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s),t&=t;return Math.abs(t).toString(36)}(s),"_").concat(Date.now().toString(36));return localStorage.setItem(e,r),r}function f(e){return"soulseed_vote_".concat(e)}function j(e,t){const s=f(e),r={votedAt:(new Date).toISOString(),selectedNames:t,voterId:v()};localStorage.setItem(s,JSON.stringify(r))}var y=s(9077),N=s(9541),w=s(4414);function k(){const{voteId:e}=(0,n.g)(),t=(0,n.Zp)(),s=(0,N.d)(),[k,V]=(0,a.useState)(null),[P,A]=(0,a.useState)(!0),[S,C]=(0,a.useState)(null),[I,O]=(0,a.useState)([]),[Y,T]=(0,a.useState)({}),[D,F]=(0,a.useState)(!1),[M,E]=(0,a.useState)(!1),[z,_]=(0,a.useState)([]),[R,L]=(0,a.useState)(!1),[H]=(0,a.useState)(v());(0,a.useEffect)(()=>{if(!e)return C("Invalid vote ID"),void A(!1);J()},[e]),(0,a.useEffect)(()=>{if(!e)return;const t=b.A.subscribeToVote(e,e=>{e&&(V(e),M&&B())});return()=>t()},[e,M]);const J=async()=>{try{if(!e)return;A(!0),C(null);const t=await b.A.getVote(e);if(!t)return C("Vote not found"),void A(!1);V(t);const s=function(e){const t=f(e);return null!==localStorage.getItem(t)}(e);if(E(s),s){const t=function(e){const t=f(e),s=localStorage.getItem(t);if(!s)return null;try{return JSON.parse(s).selectedNames||null}catch(r){return null}}(e);t&&O(t),await B()}A(!1)}catch(t){console.error("Error loading vote session:",t),C("Failed to load vote"),A(!1)}},B=async()=>{try{if(!e)return;const t=await b.A.getResults(e);_(t)}catch(t){console.error("Error loading results:",t)}};return P?(0,w.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-4",children:(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)(i.A,{className:"w-12 h-12 animate-spin text-purple-600 mx-auto mb-4"}),(0,w.jsx)("p",{className:"text-gray-600 font-medium",children:"Loading vote..."})]})}):S||!k?(0,w.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-4",children:(0,w.jsxs)("div",{className:"text-center max-w-md",children:[(0,w.jsx)(c.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,w.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Vote Not Found"}),(0,w.jsx)("p",{className:"text-gray-600 mb-6",children:S||"This vote session does not exist or has been removed."}),(0,w.jsx)("button",{onClick:()=>t("/"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-xl hover:shadow-lg transition",children:"Go to Home"})]})}):(0,w.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:[(0,w.jsx)("div",{className:"bg-white shadow-md sticky top-0 z-40",children:(0,w.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,w.jsxs)("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[(0,w.jsx)(d.A,{className:"w-5 h-5"}),(0,w.jsx)("span",{className:"font-medium",children:"Back"})]}),(0,w.jsxs)("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-md transition",children:[(0,w.jsx)(m.A,{className:"w-4 h-4"}),(0,w.jsx)("span",{className:"font-medium",children:"Share"})]})]})}),(0,w.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[(0,w.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-3",children:k.title}),k.description&&(0,w.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:k.description}),(0,w.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6",children:[(0,w.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[(0,w.jsx)(x.A,{className:"w-5 h-5 text-purple-600 mb-1"}),(0,w.jsx)("div",{className:"text-2xl font-bold text-purple-700",children:k.totalVoters}),(0,w.jsx)("div",{className:"text-xs text-gray-600",children:"Voters"})]}),(0,w.jsxs)("div",{className:"bg-pink-50 rounded-lg p-4 border border-pink-200",children:[(0,w.jsx)(u.A,{className:"w-5 h-5 text-pink-600 mb-1"}),(0,w.jsx)("div",{className:"text-2xl font-bold text-pink-700",children:k.stats.totalVotesCast}),(0,w.jsx)("div",{className:"text-xs text-gray-600",children:"Total Votes"})]}),(0,w.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200 col-span-2 sm:col-span-1",children:[(0,w.jsx)(p.A,{className:"w-5 h-5 text-blue-600 mb-1"}),(0,w.jsx)("div",{className:"text-lg font-bold text-blue-700",children:(()=>{if(null===k||void 0===k||!k.expiresAt)return"No expiration";const e=new Date,t=k.expiresAt.toDate().getTime()-e.getTime();if(t<=0)return"Expired";const s=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5);return s>0?"".concat(s," day").concat(s>1?"s":""," left"):r>0?"".concat(r," hour").concat(r>1?"s":""," left"):"Less than 1 hour left"})()}),(0,w.jsx)("div",{className:"text-xs text-gray-600",children:"Time Remaining"})]})]}),!M&&(0,w.jsx)("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg p-4 border-l-4 border-purple-600",children:k.pointsPerVoter?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("p",{className:"font-semibold text-gray-800",children:["\ud83d\udc49 You have ",k.pointsPerVoter," points to distribute!"]}),(0,w.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Allocate points to your favorite names. You can give all points to one name or spread them across multiple!"})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("p",{className:"font-semibold text-gray-800",children:"single"===k.voteType?"\ud83d\udc49 Pick your favorite name!":"\ud83d\udc49 Pick your top ".concat(k.maxVotes," favorite").concat(k.maxVotes>1?"s":"","!")}),(0,w.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Click on names to select them, then submit your vote."})]})}),M&&(0,w.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-600 flex items-center gap-3",children:[(0,w.jsx)(h,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"font-semibold text-gray-800",children:"Your vote has been recorded!"}),k.pointsPerVoter?(0,w.jsxs)("p",{className:"text-sm text-gray-600",children:["Your points: ",Object.entries(Y).filter(e=>{let[t,s]=e;return s>0}).map(e=>{let[t,s]=e;return"".concat(t," (").concat(s,")")}).join(", ")]}):(0,w.jsxs)("p",{className:"text-sm text-gray-600",children:["You voted for: ",I.join(", ")]})]})]})]}),M?(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,w.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[(0,w.jsx)(g.A,{className:"w-7 h-7 text-yellow-500"}),"Live Results"]}),(0,w.jsx)("div",{className:"space-y-3",children:z.map((e,t)=>{const s=I.includes(e.name),r=0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":null;return(0,w.jsx)(o.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"relative p-4 rounded-lg border-2 ".concat(s?"border-purple-400 bg-purple-50":"border-gray-200 bg-gray-50"),children:(0,w.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[r&&(0,w.jsx)("span",{className:"text-2xl",children:r}),(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,w.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.name,s&&(0,w.jsx)("span",{className:"text-xs bg-purple-200 text-purple-700 px-2 py-0.5 rounded-full",children:"Your pick"})]}),(0,w.jsxs)("span",{className:"text-sm font-semibold text-gray-700",children:[e.count," ",k.pointsPerVoter?"point":"vote",1!==e.count?"s":""]})]}),(0,w.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,w.jsx)(o.P.div,{initial:{width:0},animate:{width:"".concat(e.percentage,"%")},transition:{duration:.8,ease:"easeOut"},className:"h-full ".concat(s?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-gradient-to-r from-blue-400 to-blue-600")})}),(0,w.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:[e.percentage.toFixed(1),"% of total ",k.pointsPerVoter?"points":"votes"]})]})]})},e.name)})}),(0,w.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg border border-purple-200",children:[(0,w.jsxs)("p",{className:"text-sm text-gray-700 text-center mb-3",children:["\ud83d\udca1 Help ",(0,w.jsx)("strong",{children:k.createdByName})," by sharing this vote!"]}),(0,w.jsx)("button",{onClick:()=>L(!0),className:"w-full py-2 bg-white text-purple-700 font-semibold rounded-lg hover:shadow-md transition",children:"Share Vote \u2192"})]})]}):(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:k.pointsPerVoter?"Allocate Your Points":"Choose Your Favorites"}),k.pointsPerVoter&&(0,w.jsxs)("div",{className:"bg-purple-100 px-4 py-2 rounded-lg",children:[(0,w.jsx)("div",{className:"text-xs text-gray-600",children:"Points Remaining"}),(0,w.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[k.pointsPerVoter-Object.values(Y).reduce((e,t)=>e+t,0),(0,w.jsxs)("span",{className:"text-sm text-gray-500",children:[" / ",k.pointsPerVoter]})]})]})]}),k.pointsPerVoter?(0,w.jsx)("div",{className:"space-y-3 mb-6",children:k.names.map((e,t)=>{var s;const a=Y[e.name]||0,n=(null===(s=k.votes[e.name])||void 0===s?void 0:s.totalPoints)||0;return(0,w.jsx)(o.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.03*t},className:"p-4 rounded-xl border-2 transition-all ".concat(a>0?"border-purple-500 bg-gradient-to-r from-purple-50 to-pink-50 shadow-md":"border-gray-200 hover:border-purple-300"),children:(0,w.jsxs)("div",{className:"flex items-start gap-4",children:[(0,w.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,w.jsx)("h3",{className:"font-bold text-gray-800 text-lg mb-1",children:e.name}),e.meaning&&(0,w.jsxs)("p",{className:"text-sm text-gray-600 italic mb-1",children:['"',e.meaning,'"']}),e.origin&&(0,w.jsx)("p",{className:"text-xs text-gray-500",children:e.origin}),(0,w.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["Current: ",n," point",1!==n?"s":""]})]}),(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)("input",{type:"number",min:"0",max:k.pointsPerVoter,value:a,onChange:t=>{const s=Math.max(0,Math.min(k.pointsPerVoter,parseInt(t.target.value)||0));T(t=>(0,r.A)((0,r.A)({},t),{},{[e.name]:s}))},className:"w-20 px-3 py-2 text-center text-lg font-bold border-2 border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none"}),(0,w.jsx)("span",{className:"text-sm text-gray-500 font-medium",children:"pts"})]})]})},e.name)})}):(0,w.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mb-6",children:(0,w.jsx)(l.N,{children:k.names.map((e,t)=>{var r;const a=I.includes(e.name),n=(null===(r=k.votes[e.name])||void 0===r?void 0:r.count)||0;return(0,w.jsxs)(o.P.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},onClick:()=>{return t=e.name,void(!M&&k&&O(e=>e.includes(t)?e.filter(e=>e!==t):e.length>=k.maxVotes?"single"===k.voteType?[t]:(s.warning("You can only vote for ".concat(k.maxVotes," names")),e):[...e,t]));var t},className:"p-4 rounded-xl border-2 transition-all text-left ".concat(a?"border-purple-500 bg-gradient-to-br from-purple-50 to-pink-50 shadow-md scale-105":"border-gray-200 hover:border-purple-300 hover:shadow-sm"),children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,w.jsx)("h3",{className:"font-bold text-gray-800",children:e.name}),a&&(0,w.jsx)(h,{className:"w-5 h-5 text-purple-600"})]}),e.meaning&&(0,w.jsxs)("p",{className:"text-xs text-gray-600 italic mb-2 line-clamp-2",children:['"',e.meaning,'"']}),e.origin&&(0,w.jsx)("p",{className:"text-xs text-gray-500",children:e.origin}),(0,w.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[n," vote",1!==n?"s":""]})]},e.name)})})}),(0,w.jsx)(o.P.button,{onClick:async()=>{try{if(!e||!k)return;if(!!k.pointsPerVoter){const t=Object.values(Y).reduce((e,t)=>e+t,0);if(0===t)return void s.warning("Please allocate at least some points");if(t>k.pointsPerVoter)return void s.error("You can only allocate ".concat(k.pointsPerVoter," points total"));F(!0),await b.A.submitVote({voteId:e,namePoints:Y,voterId:H});const r=Object.keys(Y).filter(e=>Y[e]>0);j(e,r),E(!0),await B(),s.success("Your vote has been submitted!")}else{if(0===I.length)return void s.warning("Please select at least one name");F(!0),await b.A.submitVote({voteId:e,selectedNames:I,voterId:H}),j(e,I),E(!0),await B(),s.success("Your vote has been submitted!")}}catch(t){console.error("Error submitting vote:",t),s.error(t instanceof Error?t.message:"Failed to submit vote")}finally{F(!1)}},disabled:D||(k.pointsPerVoter?0===Object.values(Y).reduce((e,t)=>e+t,0):0===I.length),className:"w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ".concat((k.pointsPerVoter?Object.values(Y).reduce((e,t)=>e+t,0)>0:I.length>0)?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:shadow-xl transform hover:scale-[1.02]":"bg-gray-200 text-gray-400 cursor-not-allowed"),whileTap:(k.pointsPerVoter?Object.values(Y).reduce((e,t)=>e+t,0)>0:I.length>0)?{scale:.98}:{},children:D?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i.A,{className:"w-6 h-6 animate-spin"}),"Submitting..."]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(h,{className:"w-6 h-6"}),k.pointsPerVoter?"Submit Vote (".concat(Object.values(Y).reduce((e,t)=>e+t,0)," points)"):"Submit My Vote".concat(I.length>0?" (".concat(I.length,")"):"")]})})]}),(0,w.jsx)("div",{className:"mt-8 text-center text-sm text-gray-600",children:(0,w.jsxs)("p",{children:["Powered by"," ",(0,w.jsx)("button",{onClick:()=>t("/"),className:"text-purple-600 font-semibold hover:underline",children:"SoulSeed"})," ","\u2022 Create your own vote with your favorites!"]})})]}),(0,w.jsx)(y.A,{isOpen:R,onClose:()=>L(!1),voteId:e||"",title:k.title})]})}}}]);