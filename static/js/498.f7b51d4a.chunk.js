/*! For license information please see 498.f7b51d4a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksoulseed=self.webpackChunksoulseed||[]).push([[498],{855:(e,t,s)=>{s.d(t,{A:()=>n});s(9950);var a=s(5838),r=s(1538),o=s(1066),l=s(4414);const n=()=>{const{scrollY:e}=(0,r.L)(),t=(0,o.G)(e,[0,1e3],[0,-100]),s=(0,o.G)(e,[0,1e3],[0,-300]),n=(0,o.G)(e,[0,1e3],[0,-500]),i=(0,o.G)(e,[0,1e3],[0,-700]),c=(0,o.G)(e,[0,1e3],[0,50]);return(0,l.jsxs)("div",{className:"fixed inset-0 -z-10 overflow-hidden pointer-events-none",children:[(0,l.jsxs)(a.P.div,{style:{y:t},className:"absolute inset-0",children:[(0,l.jsx)("div",{className:"absolute top-20 left-10 w-96 h-96 bg-purple-300 rounded-full blur-3xl opacity-10"}),(0,l.jsx)("div",{className:"absolute bottom-40 right-20 w-[500px] h-[500px] bg-pink-300 rounded-full blur-3xl opacity-10"}),(0,l.jsx)("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-blue-300 rounded-full blur-3xl opacity-10 -translate-x-1/2 -translate-y-1/2"})]}),(0,l.jsx)(a.P.div,{style:{y:s},className:"absolute inset-0",children:[...Array(20)].map((e,t)=>(0,l.jsx)(a.P.div,{className:"absolute w-16 h-16 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full blur-md",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")},animate:{x:[0,30,0],y:[0,-30,0]},transition:{duration:10+t,repeat:1/0,ease:"easeInOut",repeatType:"mirror"}},t))}),(0,l.jsx)(a.P.div,{style:{y:n},className:"absolute inset-0",children:[...Array(50)].map((e,t)=>(0,l.jsx)("div",{className:"absolute w-2 h-2 bg-white rounded-full opacity-30",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")}},t))}),(0,l.jsx)(a.P.div,{style:{y:i,rotate:c},className:"absolute inset-0",children:[...Array(8)].map((e,t)=>(0,l.jsx)("div",{className:"absolute w-32 h-32 bg-gradient-to-br from-white/10 to-transparent border border-white/20 backdrop-blur-sm",style:{left:"".concat(90*Math.random(),"%"),top:"".concat(90*Math.random(),"%"),transform:"rotate(".concat(360*Math.random(),"deg)")}},t))})]})}},2607:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(6230).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3498:(e,t,s)=>{s.r(t),s.d(t,{default:()=>O});var a=s(9379),r=s(9950),o=s(9396),l=s(5838),n=s(6429),i=s(9680),c=s(2828),d=s(5462),m=s(8935),x=s(9975),u=s(6890),h=s(7737),p=s(6230);const g=(0,p.A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var b=s(5692),v=s(6149),f=s(8651);function y(){const e="soulseed_voter_id",t=localStorage.getItem(e);if(t)return t;const s=function(){var e;const t={userAgent:navigator.userAgent,language:navigator.language,languages:(null===(e=navigator.languages)||void 0===e?void 0:e.join(","))||"",platform:navigator.platform,screenResolution:"".concat(screen.width,"x").concat(screen.height),colorDepth:screen.colorDepth,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,timezoneOffset:(new Date).getTimezoneOffset(),timestamp:Date.now(),random:Math.random().toString(36).substring(7)};return JSON.stringify(t)}(),a="voter_".concat(function(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s),t&=t;return Math.abs(t).toString(36)}(s),"_").concat(Date.now().toString(36));return localStorage.setItem(e,a),a}function j(e){return"soulseed_vote_".concat(e)}var N=s(8694),w=s(4414);function k(e){if(!e)return"";try{var t;const s=(null===(t=e.toDate)||void 0===t?void 0:t.call(e))||new Date(e),a=(new Date).getTime()-s.getTime(),r=Math.floor(a/6e4),o=Math.floor(a/36e5),l=Math.floor(a/864e5);return r<1?"Just now":r<60?"".concat(r,"m ago"):o<24?"".concat(o,"h ago"):l<7?"".concat(l,"d ago"):s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch(s){return""}}const A=e=>{let{voters:t,maxDisplay:s=30}=e;const[a,o]=(0,r.useState)(!1);if(!t||0===t.length)return null;const l=[...t].sort((e,t)=>{var s,a,r,o;const l=(null===(s=e.votedAt)||void 0===s||null===(a=s.toMillis)||void 0===a?void 0:a.call(s))||0;return((null===(r=t.votedAt)||void 0===r||null===(o=r.toMillis)||void 0===o?void 0:o.call(r))||0)-l}),n=l.slice(0,s),i=Math.max(0,l.length-s);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-40",children:(0,w.jsx)("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-6 py-3 shadow-lg border border-gray-200",children:(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,w.jsx)(x.A,{className:"w-4 h-4"}),(0,w.jsx)("span",{className:"font-medium",children:t.length}),(0,w.jsx)("span",{className:"hidden sm:inline",children:1===t.length?"Voter":"Voters"})]}),(0,w.jsxs)("div",{className:"flex items-center -space-x-2",children:[n.map((e,t)=>{var a;return(0,w.jsxs)("div",{className:"group relative",style:{zIndex:s-t},children:[e.avatar?(0,w.jsx)("img",{src:e.avatar,alt:e.name||"Voter",className:"w-8 h-8 rounded-full border-2 border-white shadow-sm hover:scale-110 transition-transform cursor-pointer",loading:"lazy"}):(0,w.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white text-xs font-bold shadow-sm hover:scale-110 transition-transform cursor-pointer",children:(null===(a=e.name)||void 0===a?void 0:a.charAt(0).toUpperCase())||"?"}),(0,w.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:(0,w.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-1.5 whitespace-nowrap shadow-lg",children:[e.name||"Anonymous Voter",(0,w.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:(0,w.jsx)("div",{className:"w-2 h-2 bg-gray-900 rotate-45"})})]})})]},e.id)}),i>0&&(0,w.jsxs)("button",{onClick:()=>o(!0),className:"w-8 h-8 rounded-full border-2 border-white bg-gray-100 flex items-center justify-center text-gray-600 text-xs font-bold shadow-sm hover:scale-110 hover:bg-gray-200 transition-all cursor-pointer",style:{zIndex:0},children:["+",i]})]})]})})}),a&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,w.jsxs)("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden shadow-2xl",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,w.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,w.jsx)(x.A,{className:"w-5 h-5"}),"All Voters (",t.length,")"]}),(0,w.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,w.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,w.jsx)("div",{className:"overflow-y-auto max-h-[calc(80vh-80px)]",children:(0,w.jsx)("div",{className:"p-6 space-y-3",children:l.map(e=>{var t;return(0,w.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.avatar?(0,w.jsx)("img",{src:e.avatar,alt:e.name||"Voter",className:"w-12 h-12 rounded-full border-2 border-gray-200 shadow-sm",loading:"lazy"}):(0,w.jsx)("div",{className:"w-12 h-12 rounded-full border-2 border-gray-200 bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white text-lg font-bold shadow-sm",children:(null===(t=e.name)||void 0===t?void 0:t.charAt(0).toUpperCase())||"?"}),(0,w.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,w.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.name||"Anonymous Voter"}),e.votedAt&&(0,w.jsx)("p",{className:"text-sm text-gray-500",children:k(e.votedAt)})]})]},e.id)})})})]})})]})};var V=s(8818),S=s(8940),M=s(855),P=s(5536);const I=(0,p.A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var C=s(2607);const D=e=>{let{name:t,meaning:s,origin:a,currentVotes:r,totalVotes:o,rank:n,onIncrement:i,onDecrement:c,canIncrement:d,maxVotesReached:m}=e;const x=1===n&&o>0,u=r>0,h=o>0?r/o*100:0;return(0,w.jsxs)(l.P.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"relative p-6 rounded-2xl backdrop-blur-xl border-2 transition-all ".concat(x?"bg-gradient-to-br from-yellow-100/40 to-orange-100/40 border-yellow-400 shadow-[0_0_30px_rgba(251,191,36,0.3)]":u?"bg-gradient-to-br from-purple-100/30 to-pink-100/30 border-purple-400/50":"bg-white/20 border-white/30"),children:[(0,w.jsx)("div",{className:"absolute -top-3 -left-3",children:(0,w.jsx)(l.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg shadow-lg ".concat(x?"bg-gradient-to-br from-yellow-400 to-orange-500 text-white":"bg-gradient-to-br from-purple-500 to-pink-500 text-white"),children:x?(0,w.jsx)(P.A,{className:"w-6 h-6"}):"#".concat(n)})}),x&&(0,w.jsx)(l.P.div,{className:"absolute -top-8 right-4",animate:{y:[0,-10,0],rotate:[0,5,0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,w.jsx)(v.A,{className:"w-8 h-8 text-yellow-500 drop-shadow-lg"})}),(0,w.jsxs)("div",{className:"mb-4 pr-16",children:[(0,w.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-1",children:t}),s&&(0,w.jsxs)("p",{className:"text-sm text-gray-600 italic mb-1",children:['"',s,'"']}),a&&(0,w.jsx)("p",{className:"text-xs text-gray-500",children:a})]}),(0,w.jsxs)("div",{className:"mb-4",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,w.jsxs)("span",{className:"text-sm font-semibold text-gray-700",children:[r," ",1===r?"vote":"votes"]}),(0,w.jsxs)("span",{className:"text-sm font-semibold text-purple-600",children:[h.toFixed(1),"%"]})]}),(0,w.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,w.jsx)(l.P.div,{initial:{width:0},animate:{width:"".concat(h,"%")},transition:{duration:.8,ease:"easeOut"},className:"h-full ".concat(x?"bg-gradient-to-r from-yellow-400 to-orange-500":"bg-gradient-to-r from-purple-500 to-pink-500")})})]}),(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)(l.P.button,{onClick:c,disabled:0===r,whileHover:{scale:r>0?1.1:1},whileTap:{scale:r>0?.9:1},className:"flex items-center justify-center w-12 h-12 rounded-xl font-bold text-lg transition-all ".concat(r>0?"bg-red-500 text-white hover:bg-red-600 shadow-lg":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:(0,w.jsx)(I,{className:"w-5 h-5"})}),(0,w.jsx)("div",{className:"flex-1 text-center",children:(0,w.jsx)(l.P.div,{initial:{scale:1.5,opacity:0},animate:{scale:1,opacity:1},className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:r},r)}),(0,w.jsx)(l.P.button,{onClick:i,disabled:!d,whileHover:{scale:d?1.1:1},whileTap:{scale:d?.9:1},className:"flex items-center justify-center w-12 h-12 rounded-xl font-bold text-lg transition-all ".concat(d?"bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:shadow-xl shadow-lg":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:(0,w.jsx)(C.A,{className:"w-5 h-5"})})]}),m&&!u&&(0,w.jsx)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-3 text-xs text-red-600 font-semibold text-center",children:"Vote limit reached! Remove votes to vote for this name."})]})};function O(){const{voteId:e}=(0,o.g)(),t=(0,o.Zp)(),s=(0,V.d)(),{user:p}=(0,S.A)(),[k,P]=(0,r.useState)(null),[I,C]=(0,r.useState)(!0),[O,T]=(0,r.useState)(null),[z,L]=(0,r.useState)([]),[F,Y]=(0,r.useState)({}),[_,E]=(0,r.useState)({}),[R,G]=(0,r.useState)(!1),[H,J]=(0,r.useState)(!1),[B,U]=(0,r.useState)([]),[W,Z]=(0,r.useState)(!1),[q]=(0,r.useState)(y()),K=(null===p||void 0===p?void 0:p.name)||void 0,Q=(null===p||void 0===p?void 0:p.picture)||void 0,X=(0,r.useMemo)(()=>k?k.pointsPerVoter||k.maxVotes||10:0,[k]),$=(0,r.useMemo)(()=>Object.values(_).reduce((e,t)=>e+t,0),[_]),ee=(0,r.useMemo)(()=>{if(!k)return[];return k.names.map(e=>{var t,s;const r=(null===(t=k.votes[e.name])||void 0===t?void 0:t.count)||0,o=(null===(s=k.votes[e.name])||void 0===s?void 0:s.totalPoints)||0,l=_[e.name]||0,n=k.pointsPerVoter?o+l:r+l;return(0,a.A)((0,a.A)({},e),{},{currentVotes:l,totalVotes:n})}).sort((e,t)=>t.totalVotes-e.totalVotes)},[k,_]),te=(0,r.useMemo)(()=>ee.reduce((e,t)=>e+t.totalVotes,0),[ee]);(0,r.useEffect)(()=>{if(!e)return T("Invalid vote ID"),void C(!1);se()},[e]),(0,r.useEffect)(()=>{if(!e)return;const t=f.A.subscribeToVote(e,e=>{e&&(P(e),H&&ae())});return()=>t()},[e,H]);const se=async()=>{try{if(!e)return;C(!0),T(null);const t=await f.A.getVote(e);if(!t)return T("Vote not found"),void C(!1);P(t);const s=function(e){const t=j(e);return null!==localStorage.getItem(t)}(e);if(J(s),s){const t=function(e){const t=j(e),s=localStorage.getItem(t);if(!s)return null;try{return JSON.parse(s).selectedNames||null}catch(a){return null}}(e);t&&L(t),await ae()}C(!1)}catch(t){console.error("Error loading vote session:",t),T("Failed to load vote"),C(!1)}},ae=async()=>{try{if(!e)return;const t=await f.A.getResults(e);U(t)}catch(t){console.error("Error loading results:",t)}};return I?(0,w.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-4",children:(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)(i.A,{className:"w-12 h-12 animate-spin text-purple-600 mx-auto mb-4"}),(0,w.jsx)("p",{className:"text-gray-600 font-medium",children:"Loading vote..."})]})}):O||!k?(0,w.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-4",children:(0,w.jsxs)("div",{className:"text-center max-w-md",children:[(0,w.jsx)(c.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,w.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Vote Not Found"}),(0,w.jsx)("p",{className:"text-gray-600 mb-6",children:O||"This vote session does not exist or has been removed."}),(0,w.jsx)("button",{onClick:()=>t("/"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-xl hover:shadow-lg transition",children:"Go to Home"})]})}):(0,w.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 relative",children:[(0,w.jsx)(M.A,{}),(0,w.jsx)("div",{className:"bg-white shadow-md sticky top-0 z-40",children:(0,w.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,w.jsxs)("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[(0,w.jsx)(d.A,{className:"w-5 h-5"}),(0,w.jsx)("span",{className:"font-medium",children:"Back"})]}),(0,w.jsxs)("button",{onClick:()=>Z(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-md transition",children:[(0,w.jsx)(m.A,{className:"w-4 h-4"}),(0,w.jsx)("span",{className:"font-medium",children:"Share"})]})]})}),(0,w.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[(0,w.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-3",children:k.title}),k.description&&(0,w.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:k.description}),(0,w.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6",children:[(0,w.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[(0,w.jsx)(x.A,{className:"w-5 h-5 text-purple-600 mb-1"}),(0,w.jsx)("div",{className:"text-2xl font-bold text-purple-700",children:k.totalVoters}),(0,w.jsx)("div",{className:"text-xs text-gray-600",children:"Voters"})]}),(0,w.jsxs)("div",{className:"bg-pink-50 rounded-lg p-4 border border-pink-200",children:[(0,w.jsx)(u.A,{className:"w-5 h-5 text-pink-600 mb-1"}),(0,w.jsx)("div",{className:"text-2xl font-bold text-pink-700",children:k.stats.totalVotesCast}),(0,w.jsx)("div",{className:"text-xs text-gray-600",children:"Total Votes"})]}),(0,w.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200 col-span-2 sm:col-span-1",children:[(0,w.jsx)(h.A,{className:"w-5 h-5 text-blue-600 mb-1"}),(0,w.jsx)("div",{className:"text-lg font-bold text-blue-700",children:(()=>{if(null===k||void 0===k||!k.expiresAt)return"No expiration";const e=new Date,t=k.expiresAt.toDate().getTime()-e.getTime();if(t<=0)return"Expired";const s=Math.floor(t/864e5),a=Math.floor(t%864e5/36e5);return s>0?"".concat(s," day").concat(s>1?"s":""," left"):a>0?"".concat(a," hour").concat(a>1?"s":""," left"):"Less than 1 hour left"})()}),(0,w.jsx)("div",{className:"text-xs text-gray-600",children:"Time Remaining"})]})]}),!H&&(0,w.jsx)("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg p-4 border-l-4 border-purple-600",children:k.pointsPerVoter?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("p",{className:"font-semibold text-gray-800",children:["\ud83d\udc49 You have ",k.pointsPerVoter," points to distribute!"]}),(0,w.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Allocate points to your favorite names. You can give all points to one name or spread them across multiple!"})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("p",{className:"font-semibold text-gray-800",children:"single"===k.voteType?"\ud83d\udc49 Pick your favorite name!":"\ud83d\udc49 Pick your top ".concat(k.maxVotes," favorite").concat(k.maxVotes>1?"s":"","!")}),(0,w.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Click on names to select them, then submit your vote."})]})}),H&&(0,w.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-600 flex items-center gap-3",children:[(0,w.jsx)(g,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"font-semibold text-gray-800",children:"Your vote has been recorded!"}),k.pointsPerVoter?(0,w.jsxs)("p",{className:"text-sm text-gray-600",children:["Your points: ",Object.entries(F).filter(e=>{let[t,s]=e;return s>0}).map(e=>{let[t,s]=e;return"".concat(t," (").concat(s,")")}).join(", ")]}):(0,w.jsxs)("p",{className:"text-sm text-gray-600",children:["You voted for: ",z.join(", ")]})]})]})]}),H?(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,w.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[(0,w.jsx)(v.A,{className:"w-7 h-7 text-yellow-500"}),"Live Results"]}),(0,w.jsx)("div",{className:"space-y-3",children:B.map((e,t)=>{const s=z.includes(e.name),a=0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":null;return(0,w.jsx)(l.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"relative p-4 rounded-lg border-2 ".concat(s?"border-purple-400 bg-purple-50":"border-gray-200 bg-gray-50"),children:(0,w.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a&&(0,w.jsx)("span",{className:"text-2xl",children:a}),(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,w.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.name,s&&(0,w.jsx)("span",{className:"text-xs bg-purple-200 text-purple-700 px-2 py-0.5 rounded-full",children:"Your pick"})]}),(0,w.jsxs)("span",{className:"text-sm font-semibold text-gray-700",children:[e.count," ",k.pointsPerVoter?"point":"vote",1!==e.count?"s":""]})]}),(0,w.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,w.jsx)(l.P.div,{initial:{width:0},animate:{width:"".concat(e.percentage,"%")},transition:{duration:.8,ease:"easeOut"},className:"h-full ".concat(s?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-gradient-to-r from-blue-400 to-blue-600")})}),(0,w.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:[e.percentage.toFixed(1),"% of total ",k.pointsPerVoter?"points":"votes"]})]})]})},e.name)})}),(0,w.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg border border-purple-200",children:[(0,w.jsxs)("p",{className:"text-sm text-gray-700 text-center mb-3",children:["\ud83d\udca1 Help ",(0,w.jsx)("strong",{children:k.createdByName})," by sharing this vote!"]}),(0,w.jsx)("button",{onClick:()=>Z(!0),className:"w-full py-2 bg-white text-purple-700 font-semibold rounded-lg hover:shadow-md transition",children:"Share Vote \u2192"})]})]}):(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsxs)("div",{className:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl p-6 border-2 border-purple-200",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,w.jsxs)("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[(0,w.jsx)(b.A,{className:"w-5 h-5 text-yellow-500"}),"Your Votes"]}),(0,w.jsxs)("div",{className:"text-right",children:[(0,w.jsxs)("div",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:[$," ",(0,w.jsxs)("span",{className:"text-xl text-gray-400",children:["/ ",X]})]}),(0,w.jsxs)("div",{className:"text-xs text-gray-500",children:[X-$," remaining"]})]})]}),(0,w.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:(0,w.jsx)(l.P.div,{initial:{width:0},animate:{width:"".concat($/X*100,"%")},transition:{duration:.5,ease:"easeOut"},className:"h-full ".concat($>=X?"bg-gradient-to-r from-red-400 to-red-600":"bg-gradient-to-r from-purple-500 to-pink-500")})})]}),(0,w.jsxs)("div",{className:"bg-gradient-to-r from-purple-100/80 to-pink-100/80 backdrop-blur-sm rounded-xl p-4 border-l-4 border-purple-600",children:[(0,w.jsx)("p",{className:"font-semibold text-gray-800",children:"\ud83d\udc49 Click +/- to allocate your votes! Watch names climb the rankings in real-time!"}),(0,w.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["You have ",X," votes total. Spread them across your favorites or stack them all on one!"]})]}),(0,w.jsx)("div",{className:"space-y-4",children:(0,w.jsx)(n.N,{children:ee.map((e,t)=>{const r=t+1,o=$<X,n=$>=X&&0===e.currentVotes;return(0,w.jsx)(l.P.div,{layout:!0,layoutId:e.name,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{layout:{type:"spring",stiffness:300,damping:30}},children:(0,w.jsx)(D,{name:e.name,meaning:e.meaning,origin:e.origin,currentVotes:e.currentVotes,totalVotes:te,rank:r,onIncrement:()=>(e=>{if(H)return;const t=_[e]||0;$+1>X?s.warning("Vote limit reached! You can only use ".concat(X," votes.")):E(s=>(0,a.A)((0,a.A)({},s),{},{[e]:t+1}))})(e.name),onDecrement:()=>(e=>{if(H)return;const t=_[e]||0;0!==t&&E(s=>(0,a.A)((0,a.A)({},s),{},{[e]:t-1}))})(e.name),canIncrement:o,maxVotesReached:n})},e.name)})})}),(0,w.jsx)(l.P.button,{onClick:async()=>{try{if(!e||!k)return;if(0===$)return void s.warning("Please allocate at least one vote");G(!0),await f.A.submitVote({voteId:e,namePoints:_,voterId:q,voterName:K,voterAvatar:Q});const t=Object.keys(_).filter(e=>_[e]>0);!function(e,t){const s=j(e),a={votedAt:(new Date).toISOString(),selectedNames:t,voterId:y()};localStorage.setItem(s,JSON.stringify(a))}(e,t),J(!0),await ae(),s.success("Your vote has been submitted!")}catch(t){console.error("Error submitting vote:",t),s.error(t instanceof Error?t.message:"Failed to submit vote")}finally{G(!1)}},disabled:R||0===$,className:"w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all ".concat($>0?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:shadow-2xl hover:shadow-purple-500/50 transform hover:scale-[1.02]":"bg-gray-200 text-gray-400 cursor-not-allowed"),whileTap:$>0?{scale:.98}:{},children:R?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i.A,{className:"w-7 h-7 animate-spin"}),"Submitting..."]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g,{className:"w-7 h-7"}),"Submit My Vote (",$," ",1===$?"vote":"votes",")"]})})]}),(0,w.jsx)("div",{className:"mt-8 text-center text-sm text-gray-600",children:(0,w.jsxs)("p",{children:["Powered by"," ",(0,w.jsx)("button",{onClick:()=>t("/"),className:"text-purple-600 font-semibold hover:underline",children:"SoulSeed"})," ","\u2022 Create your own vote with your favorites!"]})})]}),k.allVoters&&k.allVoters.length>0&&(0,w.jsx)(A,{voters:k.allVoters,maxDisplay:30}),(0,w.jsx)(N.A,{isOpen:W,onClose:()=>Z(!1),voteId:e||"",title:k.title})]})}},5462:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(6230).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5536:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(6230).A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},6890:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(6230).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])}}]);