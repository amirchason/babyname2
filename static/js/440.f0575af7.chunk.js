/*! For license information please see 440.f0575af7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksoulseed=self.webpackChunksoulseed||[]).push([[440],{855:(e,t,o)=>{o.d(t,{A:()=>l});o(9950);var s=o(4184),r=o(1538),a=o(1066),i=o(4414);const l=()=>{const{scrollY:e}=(0,r.L)(),t=(0,a.G)(e,[0,1e3],[0,-100]),o=(0,a.G)(e,[0,1e3],[0,-300]),l=(0,a.G)(e,[0,1e3],[0,-500]),n=(0,a.G)(e,[0,1e3],[0,-700]),c=(0,a.G)(e,[0,1e3],[0,50]);return(0,i.jsxs)("div",{className:"fixed inset-0 -z-10 overflow-hidden pointer-events-none",children:[(0,i.jsxs)(s.P.div,{style:{y:t},className:"absolute inset-0",children:[(0,i.jsx)("div",{className:"absolute top-20 left-10 w-96 h-96 bg-purple-300 rounded-full blur-3xl opacity-10"}),(0,i.jsx)("div",{className:"absolute bottom-40 right-20 w-[500px] h-[500px] bg-pink-300 rounded-full blur-3xl opacity-10"}),(0,i.jsx)("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-blue-300 rounded-full blur-3xl opacity-10 -translate-x-1/2 -translate-y-1/2"})]}),(0,i.jsx)(s.P.div,{style:{y:o},className:"absolute inset-0",children:[...Array(20)].map((e,t)=>(0,i.jsx)(s.P.div,{className:"absolute w-16 h-16 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full blur-md",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")},animate:{x:[0,30,0],y:[0,-30,0]},transition:{duration:10+t,repeat:1/0,ease:"easeInOut",repeatType:"mirror"}},t))}),(0,i.jsx)(s.P.div,{style:{y:l},className:"absolute inset-0",children:[...Array(50)].map((e,t)=>(0,i.jsx)("div",{className:"absolute w-2 h-2 bg-white rounded-full opacity-30",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")}},t))}),(0,i.jsx)(s.P.div,{style:{y:n,rotate:c},className:"absolute inset-0",children:[...Array(8)].map((e,t)=>(0,i.jsx)("div",{className:"absolute w-32 h-32 bg-gradient-to-br from-white/10 to-transparent border border-white/20 backdrop-blur-sm",style:{left:"".concat(90*Math.random(),"%"),top:"".concat(90*Math.random(),"%"),transform:"rotate(".concat(360*Math.random(),"deg)")}},t))})]})}},2607:(e,t,o)=>{o.d(t,{A:()=>s});const s=(0,o(6230).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5692:(e,t,o)=>{o.d(t,{A:()=>s});const s=(0,o(6230).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},6890:(e,t,o)=>{o.d(t,{A:()=>s});const s=(0,o(6230).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},8440:(e,t,o)=>{o.r(t),o.d(t,{default:()=>k});var s=o(9950),r=o(9396),a=o(4184),i=o(6429),l=o(7304),n=o(2607),c=o(9680);const d=(0,o(6230).A)("vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);var h=o(9975),x=o(6890),m=o(5995),u=o(9201),p=o(5692),v=o(8134),w=o(8935),b=o(1641),y=o(8651),f=o(1586),g=o(8818),j=o(855),N=o(4414);function k(){const e=(0,r.Zp)(),{user:t}=(0,f.A)(),o=(0,g.d)(),[k,A]=(0,s.useState)([]),[V,P]=(0,s.useState)(!0),[E,I]=(0,s.useState)(null);(0,s.useEffect)(()=>{M()},[t]);const M=async()=>{try{if(P(!0),null!==t&&void 0!==t&&t.id){const e=(await y.A.getUserVotes(t.id)).sort((e,t)=>t.createdAt.toMillis()-e.createdAt.toMillis());A(e)}else A([])}catch(e){console.error("Error loading votes:",e),o.error("Failed to load your votes")}finally{P(!1)}},T=e=>"".concat(window.location.origin,"/vote/").concat(e),C=e=>{const t=e.toDate(),o=(new Date).getTime()-t.getTime(),s=Math.floor(o/6e4),r=Math.floor(o/36e5),a=Math.floor(o/864e5);return s<60?"".concat(s,"m ago"):r<24?"".concat(r,"h ago"):1===a?"Yesterday":a<7?"".concat(a,"d ago"):t.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return(0,N.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-purple-900 to-pink-900 relative overflow-hidden",children:[(0,N.jsx)(j.A,{}),(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,N.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-purple-900/50 to-purple-900 z-10"}),(0,N.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-purple-600/20 via-pink-600/20 to-blue-600/20 animate-pulse"})]}),(0,N.jsx)("div",{className:"relative z-20 max-w-6xl mx-auto px-4 py-20 text-center",children:(0,N.jsxs)(a.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[(0,N.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full mb-6 border border-white/20",children:[(0,N.jsx)(l.A,{className:"w-4 h-4 text-yellow-300"}),(0,N.jsx)("span",{className:"text-sm font-medium text-white",children:"Powered by Real-Time Technology"})]}),(0,N.jsx)("h1",{className:"text-6xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-white via-purple-200 to-pink-200 bg-clip-text text-transparent",children:"Your Voting Universe"}),(0,N.jsxs)("p",{className:"text-xl md:text-2xl text-purple-100 mb-8 max-w-3xl mx-auto font-light",children:["Create. Share. Decide. Together.",(0,N.jsx)("br",{}),(0,N.jsx)("span",{className:"text-purple-300",children:"Where every vote shapes the story"})]}),(0,N.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,N.jsxs)(a.P.button,{onClick:()=>e("/create-vote"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full font-bold text-lg flex items-center gap-2 shadow-2xl hover:shadow-purple-500/50 transition-shadow",children:[(0,N.jsx)(n.A,{className:"w-5 h-5"}),"Create New Vote"]}),(0,N.jsx)(a.P.button,{onClick:()=>e("/"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-8 py-4 bg-white/10 backdrop-blur-sm text-white rounded-full font-bold text-lg border-2 border-white/20 hover:bg-white/20 transition-all",children:"Explore Names"})]})]})})]}),(0,N.jsx)("div",{className:"relative z-20 max-w-6xl mx-auto px-4 -mt-10 mb-12",children:(0,N.jsxs)(a.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 p-6 grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:k.length}),(0,N.jsx)("div",{className:"text-sm text-purple-200",children:"Active Votes"})]}),(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:k.reduce((e,t)=>e+t.totalVoters,0)}),(0,N.jsx)("div",{className:"text-sm text-purple-200",children:"Total Voters"})]}),(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:k.reduce((e,t)=>e+t.stats.totalVotesCast,0)}),(0,N.jsx)("div",{className:"text-sm text-purple-200",children:"Votes Cast"})]}),(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:k.reduce((e,t)=>e+t.names.length,0)}),(0,N.jsx)("div",{className:"text-sm text-purple-200",children:"Names Listed"})]})]})}),(0,N.jsx)("div",{className:"relative z-20 max-w-6xl mx-auto px-4 pb-20",children:V?(0,N.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,N.jsx)(c.A,{className:"w-12 h-12 animate-spin text-white"})}):0===k.length?(0,N.jsxs)(a.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[(0,N.jsx)(d,{className:"w-24 h-24 text-white/30 mx-auto mb-6"}),(0,N.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"No votes yet"}),(0,N.jsx)("p",{className:"text-purple-200 mb-8",children:"Create your first voting session to get started!"}),(0,N.jsxs)(a.P.button,{onClick:()=>e("/create-vote"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full font-bold text-lg flex items-center gap-2 mx-auto shadow-2xl",children:[(0,N.jsx)(n.A,{className:"w-5 h-5"}),"Create Your First Vote"]})]}):(0,N.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:(0,N.jsx)(i.N,{children:k.map((t,s)=>(0,N.jsxs)(a.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},onMouseEnter:()=>I(t.id),onMouseLeave:()=>I(null),className:"relative group",children:[E===t.id&&(0,N.jsx)(a.P.div,{layoutId:"hover-glow",className:"absolute -inset-1 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl blur-xl opacity-50",transition:{duration:.2}}),(0,N.jsxs)("div",{className:"relative bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 p-6 hover:bg-white/15 transition-all overflow-hidden",children:[(0,N.jsx)("div",{className:"absolute top-4 right-4",children:(0,N.jsxs)("div",{className:"px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 ".concat("active"===t.status?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-gray-500/20 text-gray-300 border border-gray-500/30"),children:[(0,N.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("active"===t.status?"bg-green-400 animate-pulse":"bg-gray-400")}),"active"===t.status?"Live":"Closed"]})}),(0,N.jsx)("h3",{className:"text-2xl font-bold text-white mb-2 pr-20",children:t.title}),t.description&&(0,N.jsx)("p",{className:"text-purple-200 text-sm mb-4 line-clamp-2",children:t.description}),(0,N.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6 py-4 border-y border-white/10",children:[(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"flex items-center gap-1 text-purple-300 text-xs mb-1",children:[(0,N.jsx)(h.A,{className:"w-3 h-3"}),"Voters"]}),(0,N.jsx)("div",{className:"text-xl font-bold text-white",children:t.totalVoters})]}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"flex items-center gap-1 text-purple-300 text-xs mb-1",children:[(0,N.jsx)(x.A,{className:"w-3 h-3"}),"Votes"]}),(0,N.jsx)("div",{className:"text-xl font-bold text-white",children:t.stats.totalVotesCast})]}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"flex items-center gap-1 text-purple-300 text-xs mb-1",children:[(0,N.jsx)(m.A,{className:"w-3 h-3"}),"Names"]}),(0,N.jsx)("div",{className:"text-xl font-bold text-white",children:t.names.length})]})]}),(0,N.jsxs)("div",{className:"flex items-center justify-between text-sm text-purple-300 mb-4",children:[(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsx)(u.A,{className:"w-4 h-4"}),C(t.createdAt)]}),t.pointsPerVoter&&(0,N.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-yellow-500/20 rounded-full text-yellow-300 text-xs font-bold",children:[(0,N.jsx)(p.A,{className:"w-3 h-3"}),t.pointsPerVoter," pts"]})]}),(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsxs)(a.P.button,{onClick:()=>e("/vote/".concat(t.id)),whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-purple-500/50 transition-shadow",children:[(0,N.jsx)(v.A,{className:"w-4 h-4"}),"View Results"]}),(0,N.jsx)(a.P.button,{onClick:()=>((e,t)=>{const s=T(e);navigator.clipboard.writeText(s),o.success('Link copied for "'.concat(t,'"!'))})(t.id,t.title),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2.5 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-all border border-white/20",children:(0,N.jsx)(w.A,{className:"w-4 h-4"})}),(0,N.jsx)(a.P.button,{onClick:()=>{window.open(T(t.id),"_blank")},whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2.5 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-all border border-white/20",children:(0,N.jsx)(b.A,{className:"w-4 h-4"})})]})]})]},t.id))})})})]})}},8651:(e,t,o)=>{o.d(t,{A:()=>i});var s=o(9379),r=o(306),a=o(8081);const i=new class{constructor(){this.collectionName="votes"}async createVote(e,t,o){try{var i;if(!o.title||0===o.title.trim().length)throw new Error("Title is required");if(o.title.length>100)throw new Error("Title must be 100 characters or less");if(o.description&&o.description.length>500)throw new Error("Description must be 500 characters or less");if(o.names.length<2)throw new Error("At least 2 names are required");if(o.names.length>100)throw new Error("Maximum 100 names allowed");if(o.maxVotes>o.names.length)throw new Error("Max votes cannot exceed number of names");const l=(0,r.H9)((0,r.rJ)(a.db,this.collectionName)),n=l.id,c={};o.names.forEach(e=>{c[e.name]=(0,s.A)({count:0,voters:[],voterInfo:[],likes:0,likedBy:[],likeVoterInfo:[]},o.pointsPerVoter?{totalPoints:0,voterPoints:{}}:{})});const d=(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({createdBy:e,createdByName:t,createdAt:r.Dc.now(),updatedAt:r.Dc.now(),title:o.title.trim(),description:(null===(i=o.description)||void 0===i?void 0:i.trim())||"",names:o.names,voteType:o.voteType,maxVotes:o.maxVotes},o.pointsPerVoter?{pointsPerVoter:o.pointsPerVoter}:{}),{},{isPublic:o.isPublic,expiresAt:o.expiresAt?r.Dc.fromDate(o.expiresAt):null,status:"active",votes:c,totalVoters:0,allVoters:[]},o.votingQuestion?{votingQuestion:o.votingQuestion}:{}),o.questionType?{questionType:o.questionType}:{}),o.questionId?{questionId:o.questionId}:{}),o.questionEmoji?{questionEmoji:o.questionEmoji}:{}),{},{stats:{totalVotesCast:0,lastVoteAt:null}});return await(0,r.BN)(l,d),n}catch(l){throw console.error("Error creating vote:",l),l}}async getVote(e){try{const t=(0,r.H9)(a.db,this.collectionName,e),o=await(0,r.x7)(t);if(!o.exists())return null;const i=o.data();return i.expiresAt&&i.expiresAt.toDate()<new Date&&"active"===i.status&&(await(0,r.mZ)(t,{status:"expired"}),i.status="expired"),(0,s.A)({id:o.id},i)}catch(t){throw console.error("Error getting vote:",t),t}}async submitVote(e){try{const{voteId:t,selectedNames:o,namePoints:i,voterId:l,voterName:n,voterAvatar:c,voteReasons:d,reasonTypes:h}=e,x=(0,r.H9)(a.db,this.collectionName,t);await(0,r.c4)(a.db,async e=>{const t=await e.get(x);if(!t.exists())throw new Error("Vote not found");const a=t.data();if("active"!==a.status)throw new Error("This vote is no longer active");if(a.expiresAt&&a.expiresAt.toDate()<new Date)throw new Error("This vote has expired");const m=(0,s.A)({},a.votes),u=Object.values(m).some(e=>{var t,o;return(null===(t=e.voters)||void 0===t?void 0:t.includes(l))||(null===(o=e.voterPoints)||void 0===o?void 0:o[l])});let p=!u;const v={id:l,name:n,avatar:c,votedAt:r.Dc.now()};if(a.pointsPerVoter&&i){const t=Object.values(i).reduce((e,t)=>e+t,0);if(t>a.pointsPerVoter)throw new Error("You can only allocate ".concat(a.pointsPerVoter," points total"));u&&Object.keys(m).forEach(e=>{if(m[e].voterPoints&&m[e].voterPoints[l]){const t=m[e].voterPoints[l];m[e].totalPoints=(m[e].totalPoints||0)-t,delete m[e].voterPoints[l]}}),Object.entries(i).forEach(e=>{let[t,o]=e;if(o>0){m[t]||(m[t]={count:0,voters:[],voterInfo:[],totalPoints:0,voterPoints:{}}),m[t].voterPoints||(m[t].voterPoints={}),m[t].totalPoints||(m[t].totalPoints=0),m[t].voterInfo||(m[t].voterInfo=[]),m[t].voterPoints[l]=o,m[t].totalPoints=(m[t].totalPoints||0)+o;const e=(0,s.A)((0,s.A)({},v),{},{reason:null===d||void 0===d?void 0:d[t],reasonType:null===h||void 0===h?void 0:h[t]}),r=m[t].voterInfo.findIndex(e=>e.id===l);r>=0?m[t].voterInfo[r]=e:m[t].voterInfo.push(e)}});let o=a.allVoters||[];const n=o.findIndex(e=>e.id===l);n>=0?o[n]=v:o=[...o,v],e.update(x,{votes:m,allVoters:o,totalVoters:p?a.totalVoters+1:a.totalVoters,"stats.totalVotesCast":a.stats.totalVotesCast+t,"stats.lastVoteAt":r.Dc.now(),updatedAt:r.Dc.now()})}else{if(!o)throw new Error("Invalid submission: must provide either selectedNames or namePoints");{if(o.length>a.maxVotes)throw new Error("You can only vote for ".concat(a.maxVotes," name(s)"));if(0===o.length)throw new Error("Please select at least one name");u&&Object.keys(m).forEach(e=>{m[e].voters.includes(l)&&(m[e].voters=m[e].voters.filter(e=>e!==l),m[e].count=m[e].voters.length)}),o.forEach(e=>{if(m[e]||(m[e]={count:0,voters:[],voterInfo:[]}),m[e].voterInfo||(m[e].voterInfo=[]),!m[e].voters.includes(l)){m[e].voters.push(l),m[e].count=m[e].voters.length;const t=(0,s.A)((0,s.A)({},v),{},{reason:null===d||void 0===d?void 0:d[e],reasonType:null===h||void 0===h?void 0:h[e]});m[e].voterInfo.push(t)}});let t=a.allVoters||[];const i=t.findIndex(e=>e.id===l);i>=0?t[i]=v:t=[...t,v],e.update(x,{votes:m,allVoters:t,totalVoters:p?a.totalVoters+1:a.totalVoters,"stats.totalVotesCast":a.stats.totalVotesCast+o.length,"stats.lastVoteAt":r.Dc.now(),updatedAt:r.Dc.now()})}}})}catch(t){throw console.error("Error submitting vote:",t),t}}async getResults(e){try{const t=await this.getVote(e);if(!t)throw new Error("Vote not found");const o=[],s=!!t.pointsPerVoter,r=Object.values(t.votes).reduce((e,t)=>e+(s?t.totalPoints||0:t.count),0);return Object.entries(t.votes).forEach(e=>{let[t,a]=e;const i=s?a.totalPoints||0:a.count;o.push({name:t,count:i,percentage:r>0?i/r*100:0,rank:0})}),o.sort((e,t)=>t.count-e.count),o.forEach((e,t)=>{e.rank=t+1}),o}catch(t){throw console.error("Error getting results:",t),t}}async getUserVotes(e){try{const t=(0,r.rJ)(a.db,this.collectionName),o=(0,r.P)(t,(0,r._M)("createdBy","==",e)),i=await(0,r.GG)(o),l=[];return i.forEach(e=>{l.push((0,s.A)({id:e.id},e.data()))}),l}catch(t){throw console.error("Error getting user votes:",t),t}}async deleteVote(e,t){try{const o=(0,r.H9)(a.db,this.collectionName,e),s=await(0,r.x7)(o);if(!s.exists())throw new Error("Vote not found");if(s.data().createdBy!==t)throw new Error("Only the creator can delete this vote");await(0,r.kd)(o)}catch(o){throw console.error("Error deleting vote:",o),o}}async closeVote(e,t){try{const o=(0,r.H9)(a.db,this.collectionName,e),s=await(0,r.x7)(o);if(!s.exists())throw new Error("Vote not found");if(s.data().createdBy!==t)throw new Error("Only the creator can close this vote");await(0,r.mZ)(o,{status:"closed",updatedAt:r.Dc.now()})}catch(o){throw console.error("Error closing vote:",o),o}}subscribeToVote(e,t){const o=(0,r.H9)(a.db,this.collectionName,e);return(0,r.aQ)(o,e=>{e.exists()?t((0,s.A)({id:e.id},e.data())):t(null)},e=>{console.error("Error listening to vote updates:",e),t(null)})}async hasUserVoted(e,t){try{const o=await this.getVote(e);return!!o&&Object.values(o.votes).some(e=>{var o;return null===(o=e.voters)||void 0===o?void 0:o.includes(t)})}catch(o){return console.error("Error checking if user voted:",o),!1}}async getUserSelection(e,t){try{const o=await this.getVote(e);if(!o)return[];const s=[];return Object.entries(o.votes).forEach(e=>{let[o,r]=e;r.voters.includes(t)&&s.push(o)}),s}catch(o){return console.error("Error getting user selection:",o),[]}}async toggleLike(e,t,o,i,l){try{const n=(0,r.H9)(a.db,this.collectionName,e);await(0,r.c4)(a.db,async e=>{const a=await e.get(n);if(!a.exists())throw new Error("Vote not found");const c=a.data(),d=(0,s.A)({},c.votes);d[t]||(d[t]={count:0,voters:[],voterInfo:[],likes:0,likedBy:[],likeVoterInfo:[]}),d[t].likedBy||(d[t].likedBy=[],d[t].likes=0),d[t].likeVoterInfo||(d[t].likeVoterInfo=[]);const h=d[t].likedBy,x=h.includes(o),m={id:o,name:i,avatar:l,votedAt:r.Dc.now()};x?(d[t].likedBy=h.filter(e=>e!==o),d[t].likes=Math.max(0,(d[t].likes||0)-1),d[t].likeVoterInfo=d[t].likeVoterInfo.filter(e=>e.id!==o)):(d[t].likedBy=[...h,o],d[t].likes=(d[t].likes||0)+1,d[t].likeVoterInfo.push(m));let u=c.allVoters||[];const p=u.findIndex(e=>e.id===o);p>=0?u[p]=m:u=[...u,m],e.update(n,{votes:d,allVoters:u,updatedAt:r.Dc.now()})})}catch(n){throw console.error("Error toggling like:",n),n}}}},8935:(e,t,o)=>{o.d(t,{A:()=>s});const s=(0,o(6230).A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},9201:(e,t,o)=>{o.d(t,{A:()=>s});const s=(0,o(6230).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9680:(e,t,o)=>{o.d(t,{A:()=>s});const s=(0,o(6230).A)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])}}]);