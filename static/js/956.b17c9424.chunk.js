/*! For license information please see 956.b17c9424.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksoulseed=self.webpackChunksoulseed||[]).push([[956],{5462:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(6230).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6890:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(6230).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},6956:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(9950),r=s(9396),n=s(6429),l=s(5838),o=s(9680),i=s(2828),c=s(5462),d=s(8935),m=s(9975),x=s(6890),u=s(7737);const h=(0,s(6230).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var g=s(6149),p=s(8651);function b(){const e="soulseed_voter_id",t=localStorage.getItem(e);if(t)return t;const s=function(){var e;const t={userAgent:navigator.userAgent,language:navigator.language,languages:(null===(e=navigator.languages)||void 0===e?void 0:e.join(","))||"",platform:navigator.platform,screenResolution:"".concat(screen.width,"x").concat(screen.height),colorDepth:screen.colorDepth,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,timezoneOffset:(new Date).getTimezoneOffset(),timestamp:Date.now(),random:Math.random().toString(36).substring(7)};return JSON.stringify(t)}(),a="voter_".concat(function(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s),t&=t;return Math.abs(t).toString(36)}(s),"_").concat(Date.now().toString(36));return localStorage.setItem(e,a),a}function f(e){return"soulseed_vote_".concat(e)}var v=s(9077),j=s(9541),N=s(4414);function y(){const{voteId:e}=(0,r.g)(),t=(0,r.Zp)(),s=(0,j.d)(),[y,w]=(0,a.useState)(null),[k,S]=(0,a.useState)(!0),[A,C]=(0,a.useState)(null),[V,I]=(0,a.useState)([]),[T,D]=(0,a.useState)(!1),[O,F]=(0,a.useState)(!1),[P,E]=(0,a.useState)([]),[M,z]=(0,a.useState)(!1),[Y]=(0,a.useState)(b());(0,a.useEffect)(()=>{if(!e)return C("Invalid vote ID"),void S(!1);_()},[e]),(0,a.useEffect)(()=>{if(!e)return;const t=p.A.subscribeToVote(e,e=>{e&&(w(e),O&&L())});return()=>t()},[e,O]);const _=async()=>{try{if(!e)return;S(!0),C(null);const t=await p.A.getVote(e);if(!t)return C("Vote not found"),void S(!1);w(t);const s=function(e){const t=f(e);return null!==localStorage.getItem(t)}(e);if(F(s),s){const t=function(e){const t=f(e),s=localStorage.getItem(t);if(!s)return null;try{return JSON.parse(s).selectedNames||null}catch(a){return null}}(e);t&&I(t),await L()}S(!1)}catch(t){console.error("Error loading vote session:",t),C("Failed to load vote"),S(!1)}},L=async()=>{try{if(!e)return;const t=await p.A.getResults(e);E(t)}catch(t){console.error("Error loading results:",t)}};return k?(0,N.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-4",children:(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsx)(o.A,{className:"w-12 h-12 animate-spin text-purple-600 mx-auto mb-4"}),(0,N.jsx)("p",{className:"text-gray-600 font-medium",children:"Loading vote..."})]})}):A||!y?(0,N.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-4",children:(0,N.jsxs)("div",{className:"text-center max-w-md",children:[(0,N.jsx)(i.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,N.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Vote Not Found"}),(0,N.jsx)("p",{className:"text-gray-600 mb-6",children:A||"This vote session does not exist or has been removed."}),(0,N.jsx)("button",{onClick:()=>t("/"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-xl hover:shadow-lg transition",children:"Go to Home"})]})}):(0,N.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:[(0,N.jsx)("div",{className:"bg-white shadow-md sticky top-0 z-40",children:(0,N.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,N.jsxs)("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[(0,N.jsx)(c.A,{className:"w-5 h-5"}),(0,N.jsx)("span",{className:"font-medium",children:"Back"})]}),(0,N.jsxs)("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-md transition",children:[(0,N.jsx)(d.A,{className:"w-4 h-4"}),(0,N.jsx)("span",{className:"font-medium",children:"Share"})]})]})}),(0,N.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,N.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[(0,N.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-3",children:y.title}),y.description&&(0,N.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:y.description}),(0,N.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6",children:[(0,N.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[(0,N.jsx)(m.A,{className:"w-5 h-5 text-purple-600 mb-1"}),(0,N.jsx)("div",{className:"text-2xl font-bold text-purple-700",children:y.totalVoters}),(0,N.jsx)("div",{className:"text-xs text-gray-600",children:"Voters"})]}),(0,N.jsxs)("div",{className:"bg-pink-50 rounded-lg p-4 border border-pink-200",children:[(0,N.jsx)(x.A,{className:"w-5 h-5 text-pink-600 mb-1"}),(0,N.jsx)("div",{className:"text-2xl font-bold text-pink-700",children:y.stats.totalVotesCast}),(0,N.jsx)("div",{className:"text-xs text-gray-600",children:"Total Votes"})]}),(0,N.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200 col-span-2 sm:col-span-1",children:[(0,N.jsx)(u.A,{className:"w-5 h-5 text-blue-600 mb-1"}),(0,N.jsx)("div",{className:"text-lg font-bold text-blue-700",children:(()=>{if(null===y||void 0===y||!y.expiresAt)return"No expiration";const e=new Date,t=y.expiresAt.toDate().getTime()-e.getTime();if(t<=0)return"Expired";const s=Math.floor(t/864e5),a=Math.floor(t%864e5/36e5);return s>0?"".concat(s," day").concat(s>1?"s":""," left"):a>0?"".concat(a," hour").concat(a>1?"s":""," left"):"Less than 1 hour left"})()}),(0,N.jsx)("div",{className:"text-xs text-gray-600",children:"Time Remaining"})]})]}),!O&&(0,N.jsxs)("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg p-4 border-l-4 border-purple-600",children:[(0,N.jsx)("p",{className:"font-semibold text-gray-800",children:"single"===y.voteType?"\ud83d\udc49 Pick your favorite name!":"\ud83d\udc49 Pick your top ".concat(y.maxVotes," favorite").concat(y.maxVotes>1?"s":"","!")}),(0,N.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Click on names to select them, then submit your vote."})]}),O&&(0,N.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-600 flex items-center gap-3",children:[(0,N.jsx)(h,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:"font-semibold text-gray-800",children:"Your vote has been recorded!"}),(0,N.jsxs)("p",{className:"text-sm text-gray-600",children:["You voted for: ",V.join(", ")]})]})]})]}),O?(0,N.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,N.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[(0,N.jsx)(g.A,{className:"w-7 h-7 text-yellow-500"}),"Live Results"]}),(0,N.jsx)("div",{className:"space-y-3",children:P.map((e,t)=>{const s=V.includes(e.name),a=0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":null;return(0,N.jsx)(l.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"relative p-4 rounded-lg border-2 ".concat(s?"border-purple-400 bg-purple-50":"border-gray-200 bg-gray-50"),children:(0,N.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a&&(0,N.jsx)("span",{className:"text-2xl",children:a}),(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,N.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.name,s&&(0,N.jsx)("span",{className:"text-xs bg-purple-200 text-purple-700 px-2 py-0.5 rounded-full",children:"Your pick"})]}),(0,N.jsxs)("span",{className:"text-sm font-semibold text-gray-700",children:[e.count," vote",1!==e.count?"s":""]})]}),(0,N.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,N.jsx)(l.P.div,{initial:{width:0},animate:{width:"".concat(e.percentage,"%")},transition:{duration:.8,ease:"easeOut"},className:"h-full ".concat(s?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-gradient-to-r from-blue-400 to-blue-600")})}),(0,N.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:[e.percentage.toFixed(1),"% of total votes"]})]})]})},e.name)})}),(0,N.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg border border-purple-200",children:[(0,N.jsxs)("p",{className:"text-sm text-gray-700 text-center mb-3",children:["\ud83d\udca1 Help ",(0,N.jsx)("strong",{children:y.createdByName})," by sharing this vote!"]}),(0,N.jsx)("button",{onClick:()=>z(!0),className:"w-full py-2 bg-white text-purple-700 font-semibold rounded-lg hover:shadow-md transition",children:"Share Vote \u2192"})]})]}):(0,N.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Choose Your Favorites"}),(0,N.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mb-6",children:(0,N.jsx)(n.N,{children:y.names.map((e,t)=>{var a;const r=V.includes(e.name),n=(null===(a=y.votes[e.name])||void 0===a?void 0:a.count)||0;return(0,N.jsxs)(l.P.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},onClick:()=>{return t=e.name,void(!O&&y&&I(e=>e.includes(t)?e.filter(e=>e!==t):e.length>=y.maxVotes?"single"===y.voteType?[t]:(s.warning("You can only vote for ".concat(y.maxVotes," names")),e):[...e,t]));var t},className:"p-4 rounded-xl border-2 transition-all text-left ".concat(r?"border-purple-500 bg-gradient-to-br from-purple-50 to-pink-50 shadow-md scale-105":"border-gray-200 hover:border-purple-300 hover:shadow-sm"),children:[(0,N.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,N.jsx)("h3",{className:"font-bold text-gray-800",children:e.name}),r&&(0,N.jsx)(h,{className:"w-5 h-5 text-purple-600"})]}),e.meaning&&(0,N.jsxs)("p",{className:"text-xs text-gray-600 italic mb-2 line-clamp-2",children:['"',e.meaning,'"']}),e.origin&&(0,N.jsx)("p",{className:"text-xs text-gray-500",children:e.origin}),(0,N.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[n," vote",1!==n?"s":""]})]},e.name)})})}),(0,N.jsx)(l.P.button,{onClick:async()=>{try{if(!e||!y)return;if(0===V.length)return void s.warning("Please select at least one name");D(!0),await p.A.submitVote({voteId:e,selectedNames:V,voterId:Y}),function(e,t){const s=f(e),a={votedAt:(new Date).toISOString(),selectedNames:t,voterId:b()};localStorage.setItem(s,JSON.stringify(a))}(e,V),F(!0),await L(),s.success("Your vote has been submitted!")}catch(t){console.error("Error submitting vote:",t),s.error(t instanceof Error?t.message:"Failed to submit vote")}finally{D(!1)}},disabled:T||0===V.length,className:"w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ".concat(V.length>0?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:shadow-xl transform hover:scale-[1.02]":"bg-gray-200 text-gray-400 cursor-not-allowed"),whileTap:V.length>0?{scale:.98}:{},children:T?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.A,{className:"w-6 h-6 animate-spin"}),"Submitting..."]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h,{className:"w-6 h-6"}),"Submit My Vote",V.length>0&&" (".concat(V.length,")")]})})]}),(0,N.jsx)("div",{className:"mt-8 text-center text-sm text-gray-600",children:(0,N.jsxs)("p",{children:["Powered by"," ",(0,N.jsx)("button",{onClick:()=>t("/"),className:"text-purple-600 font-semibold hover:underline",children:"SoulSeed"})," ","\u2022 Create your own vote with your favorites!"]})})]}),(0,N.jsx)(v.A,{isOpen:M,onClose:()=>z(!1),voteId:e||"",title:y.title})]})}}}]);